<Window x:Class="ScreenCapture.UI.Views.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="clr-namespace:ScreenCapture.UI.Controls"
        mc:Ignorable="d"
        Title="ScreenCapture"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Background="Transparent"
        Cursor="Cross"
        Loaded="Window_Loaded"
        KeyDown="Window_KeyDown">
    
    <Canvas x:Name="RootCanvas">
        <!-- Selection Canvas - Handles all custom drawing -->
        <Canvas x:Name="SelectionCanvas" 
                Background="Transparent"
                MouseLeftButtonDown="Canvas_MouseLeftButtonDown"
                MouseMove="Canvas_MouseMove"
                MouseLeftButtonUp="Canvas_MouseLeftButtonUp" />
        
        <!-- Drawing Canvas - Overlay for annotations -->
        <controls:DrawingCanvas x:Name="DrawingCanvas" 
                                IsHitTestVisible="False"
                                Visibility="Collapsed"/>
        
        <!-- Instruction overlay (shown before selection starts) -->
        <Border x:Name="InstructionPanel"
                Background="#CC1E1E1E"
                CornerRadius="8"
                Padding="20,12"
                Visibility="Visible">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Click and drag to select an area" 
                           Foreground="White" 
                           FontSize="14"
                           VerticalAlignment="Center" />
                <TextBlock Text="  •  " 
                           Foreground="#666" 
                           FontSize="14"
                           VerticalAlignment="Center" />
                <TextBlock Text="Press " 
                           Foreground="#888" 
                           FontSize="14"
                           VerticalAlignment="Center" />
                <TextBlock Text="ESC" 
                           Foreground="#2196F3" 
                           FontSize="14"
                           FontWeight="Bold"
                           VerticalAlignment="Center" />
                <TextBlock Text=" to cancel" 
                           Foreground="#888" 
                           FontSize="14"
                           VerticalAlignment="Center" />
            </StackPanel>
        </Border>

        <!-- Selection dimensions display -->
        <Border x:Name="DimensionsPanel"
                Background="#CC1E1E1E"
                CornerRadius="4"
                Padding="8,4"
                Visibility="Collapsed">
            <TextBlock x:Name="DimensionsText"
                       Text="0 × 0"
                       Foreground="White"
                       FontSize="12"
                       FontFamily="Consolas" />
        </Border>
        
        <!-- Annotation Toolbar (right side, shown after selection) -->
        <controls:AnnotationToolbar x:Name="AnnotationToolbar"
                                    Visibility="Collapsed"/>
        
        <!-- Action Toolbar (bottom, shown after selection) -->
        <controls:ActionToolbar x:Name="ActionToolbar"
                                Visibility="Collapsed"/>
        
        <!-- Text Input Box (for text annotations) -->
        <Border x:Name="TextInputPanel"
                Background="#EE2D2D30"
                CornerRadius="4"
                Padding="4"
                Visibility="Collapsed">
            <TextBox x:Name="TextInputBox"
                     Width="200"
                     Background="Transparent"
                     Foreground="White"
                     CaretBrush="White"
                     BorderThickness="0"
                     FontSize="14"
                     AcceptsReturn="True"
                     KeyDown="TextInputBox_KeyDown"
                     LostFocus="TextInputBox_LostFocus"/>
        </Border>
    </Canvas>
</Window>
